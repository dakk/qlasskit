

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How it works &mdash; qlasskit  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5432af51" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported python subset" href="supported.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            qlasskit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Qlasskit</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How it works</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ast-traslator">AST Traslator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiler">Compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#result">Result</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="supported.html">Supported python subset</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="exporter.html">Exporting to other frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="bqm.html">Binary Quadratic Model, Qubo &amp; Ising</a></li>
<li class="toctree-l1"><a class="reference internal" href="decompiler_and_optimizer.html">Decompiler and Circuit Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_tools.html">CLI Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_grover.html">Grover search</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grover_sat.html">Grover search: SAT problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grover_subset.html">Grover search: subset problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grover_hash.html">Grover search: hash function preimage attack</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grover_sudoku.html">Grover search: sudoku solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grover_factors.html">Grover: factorize number</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_simon.html">Simon function periodicity</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_deutsch_jozsa.html">Deutsch Jozsa algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_bernstein_vazirani.html">Bernstein Vazirani algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_unitary_of_f.html">Unitary of qlasskit function</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_big_circuit.html">Working with big circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_bqm_tsp.html">Solving TSP as Binary Quadratic Model</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">qlasskit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How it works</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/how_it_works.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-it-works">
<h1>How it works<a class="headerlink" href="#how-it-works" title="Link to this heading">ÔÉÅ</a></h1>
<p>To convert Python code into a quantum circuit, qlasskit implements a series of transformations:</p>
<ol class="arabic simple">
<li><p>It begins with the Python <em>AST</em> (Abstract Syntax Tree), converting it into a more streamlined form using the <code class="docutils literal notranslate"><span class="pre">ast2ast</span></code> module.</p></li>
<li><p>Next, the streamlined AST is translated into <em>boolean expressions</em> as an intermediate step by the <code class="docutils literal notranslate"><span class="pre">ast2logic</span></code> module.
During this phase, boolean expressions are refined and optimized in preparation for the final transformation.</p></li>
<li><p>Finally, the <code class="docutils literal notranslate"><span class="pre">compiler</span></code> module takes these optimized boolean expressions and compiles them into a
<em>quantum circuit</em>.</p></li>
</ol>
<p>Unlike other libraries that translate individual operations into quantum circuits before combining them,
qlasskit constructs a single boolean expression for each output qubit of the entire function.
This unique approach facilitates advanced optimization leveraging boolean algebraic properties.</p>
<p><img alt="Transformations" src="_images/qlasskit_transformations.png" /></p>
<p>For instance, let assume we have the following function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qlasskit</span> <span class="kn">import</span> <span class="n">qlassf</span><span class="p">,</span> <span class="n">Qint</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span>


<span class="nd">@qlassf</span>
<span class="k">def</span> <span class="nf">f_comp</span><span class="p">(</span><span class="n">b</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="n">Qint</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Qint</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">b</span> <span class="k">else</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">n</span>
</pre></div>
</div>
</div>
</div>
<p>If we decompose the algorithm in 3 separate additions and we compile them separately, we obtain the following circuit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@qlassf</span>
<span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">b</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="n">Qint</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Qint</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">b</span> <span class="k">else</span> <span class="mi">2</span><span class="p">)</span>


<span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">f_comp</span><span class="o">.</span><span class="n">num_qubits</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">qc</span><span class="o">.</span><span class="n">barrier</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;it_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">qc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f1</span><span class="o">.</span><span class="n">gate</span><span class="p">(),</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Operations:&quot;</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="n">qc</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s2">&quot;mpl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Operations: OrderedDict([(&#39;cx&#39;, 12), (&#39;barrier&#39;, 3), (&#39;x&#39;, 3), (&#39;ccx&#39;, 3)])
</pre></div>
</div>
<img alt="_images/7a2632b50247892568957688760b9d6cd2598a3a63393fc8272486f8defcd716.png" src="_images/7a2632b50247892568957688760b9d6cd2598a3a63393fc8272486f8defcd716.png" />
</div>
</div>
<p>While if we compile the whole function to a quantum circuit using qlasskit, we obtain the following quantum circuit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">f_comp</span><span class="o">.</span><span class="n">num_qubits</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f_comp</span><span class="o">.</span><span class="n">gate</span><span class="p">(),</span> <span class="n">f_comp</span><span class="o">.</span><span class="n">qubits</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Operations:&quot;</span><span class="p">,</span> <span class="n">qc</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span><span class="o">.</span><span class="n">count_ops</span><span class="p">())</span>
<span class="n">qc</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s2">&quot;mpl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Operations: OrderedDict([(&#39;cx&#39;, 4), (&#39;x&#39;, 1), (&#39;ccx&#39;, 1)])
</pre></div>
</div>
<img alt="_images/c1d6cfd696ce5714fc338773526f92c1d3253f1550baeb9bcec418660f2ae957.png" src="_images/c1d6cfd696ce5714fc338773526f92c1d3253f1550baeb9bcec418660f2ae957.png" />
</div>
</div>
<p>As we can see from the circuit drawings, qlasskit approach needs half the number of qubits and half the number of gates.</p>
<section id="ast-traslator">
<h2>AST Traslator<a class="headerlink" href="#ast-traslator" title="Link to this heading">ÔÉÅ</a></h2>
<p>Given a python function, the <code class="docutils literal notranslate"><span class="pre">qlasskit.ast2logic</span></code> module walks its syntax tree translating all the statements /
expressions to boolean expressions.</p>
<p>For instance, the following function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@qlassf</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Qint</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
<p>Is translated to this boolean expression:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">expressions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(_ret, n.0 &amp; n.1 &amp; ~n.2 &amp; ~n.3)]
</pre></div>
</div>
</div>
</div>
</section>
<section id="compiler">
<h2>Compiler<a class="headerlink" href="#compiler" title="Link to this heading">ÔÉÅ</a></h2>
<p>The boolean expressions are then being fed to the `qlasskit.compiler`` which compiles boolean expressions
to invertible circuits, introducing auxiliary qubits. In this step, the compiler will automatically uncompute
auxiliary qubits in order to reduce the number of qubits needed and the circuit footprint.</p>
<p>For the compilation, two backends are supported:</p>
<ul class="simple">
<li><p>InternalCompiler</p></li>
<li><p>Tweedledum.xag_synth</p></li>
</ul>
</section>
<section id="result">
<h2>Result<a class="headerlink" href="#result" title="Link to this heading">ÔÉÅ</a></h2>
<p>The result of the compiler is a quantum circuit represented with qlasskit <code class="docutils literal notranslate"><span class="pre">QCircuit</span></code>. This circuit
can now be exported to one of the supported framework as a gate or as a standalone circuit.</p>
<p>The previous example function <code class="docutils literal notranslate"><span class="pre">f</span></code>, is translated to the following quantum circuit: the
result is available at qubit <code class="docutils literal notranslate"><span class="pre">q6</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="o">.</span><span class="n">export</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s2">&quot;mpl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/26e558636d00c662671b1e1b31864f44b0c96f79729d7b454b41985ac2205cca.png" src="_images/26e558636d00c662671b1e1b31864f44b0c96f79729d7b454b41985ac2205cca.png" />
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="supported.html" class="btn btn-neutral float-right" title="Supported python subset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, Davide Gessa (dakk).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>